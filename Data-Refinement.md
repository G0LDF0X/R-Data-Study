# Chapter 7

### 결측치 정제하기
결측치(Missing Value)는 누락된 값, 비어 있는 값을 의미한다. R에서는 결측치를 **NA** 로 표기한다. 문자로 구성된 결측치는 **< NA >** 로 표기하며, 만약 영문자 NA를 표기할 경우에는 **"NA"** 로 표기된다.<br>
<br>
결측치를 확인하기 위해서는 **is.na()** 함수를 사용한다. 결측치가 있을 경우에는 TRUE, 없으면 FALSE를 화면에 표시한다.<br>.
table()과 is.na()를 함께 적용하면 결측치의 갯수를 한 번에 파악할 수 있다.<br>
<br>
table(is.na(df))<br>
<br>
.##<br>
.## FALSE  TRUE<br>
.##    8     2<br>
<br>
table(is.na())에 변수명을 지정하면 해당 변수에 결측치가 몇 개 있는지 확인할 수 있다.<br>
<br>
table(is.na(df$score))<br>
<br>
.##<br>
.## FALSE  TRUE<br>
.##    4     1<br>
<br>
만약 결측치가 있는 상태에서 연산을 하려고 시도하면 NA가 출력된다.<br>
<br>
mean(df$score)<br>
<br>
.## [1] NA<br>
<br>
is.na()와 filter() 함수를 이용하면 결측치가 있는 행을 따로 출력할 수 있다. 반대로, is.na() 앞에 기호 !를 붙이면 부정의 의미가 되어 결측치가 없는 행만 출력된다. 이때 & 기호를 이용해 여러 개의 결측치를 제거할 수도 있다.<br>
<br>
**na.omit()** 함수를 이용하면 모든 변수에서 결측치가 없는 데이터만을 출력할 수 있다. 해당 함수는 결측치가 하나라도 있을 경우 모두 제거하기 때문에, 간편하지만 분석에 필요한 행까지 지울 수 있다는 단점이 있다. 따라서 실제 상황에서는 filter를 이용해 분석에 사용할 변수의 결측치만 제거하는 편이 낫다.<br>
<br>
mean()과 같은 수치 연산 함수들은 결측치를 제외하고 연산하도록 설정하는 **na.rm** 파라미터를 지원한다. na.rm을 TRUE로 설정하면 결측치를 제외하고 함수를 적용하기 때문에, 결측치를 제거하는 절차를 건너 뛰고 곧바로 분석할 수 있다. 하지만 모든 함수가 na.rm 파라미터를 지원하지는 않기 때문에, 이럴 경우에는 filter()로 결측치를 제거한 후 함수를 적용하는 순으로 작업해야 한다.<br>
<br>
코드에서 대괄호 []는 데이터의 위치를 지정하는 역할을 한다. [행 위치, 열 위치]의 순서다.<br>
결측치가 발생한 경우 결측치를 제거하는 대신 평균이나 최빈값 같은 대표값을 구해 모든 결측치를 하나의 값으로 대체하는 방법이 있으며, 통계 분석 기법으로 각 결측치의 예측값을 추정해 대체하는 방법이 있다.<br>
<br>

### 이상치 정제하기
정상 범주에서 크게 벗어난 값을 이상치(Outlier)라고 한다. 데이터 수집 과정에서 오류가 발생할 수 있기 때문에 현장에서 만들어진 실제 데이터에는 이상치가 포함될 수 있다. 혹은 오류는 아니지만 아주 굉장히 드물게 발생하는 극단적인 값이 있을 수 있다. 이상치가 포함되어 있으면 분석 결과가 왜곡되므로 제거해야 한다.<br>
<br>
제거하는 과정은 해당 값을 결측치로 변경한 뒤, 결측치를 제거하는 과정과 동일하게 진행한다.<br>
<br>
boxplot(mpg$hwy)$stats<br>
<br>
.##       [,1]<br>
.## [1,]   12<br>   # 아래쪽 극단치 경계
.## [2,]   18<br>   # 1사분위수
.## [3,]   24<br>   # 중앙값
.## [4,]   27<br>   # 3사분위수
.## [5,]   37<br>   # 위쪽 극단치 경계
.## attr(, "class")<br>
.##         1<br>
.## "integer"<br>
<br>
